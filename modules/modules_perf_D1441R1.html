<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.8">
<meta name="author" content="Rene Rivera">
<meta name="copyright" content="Copyright 2019 Rene Rivera">
<title>Are modules fast?</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock pre.nowrap,.literalblock pre.nowrap pre,.listingblock pre.nowrap,.listingblock pre.nowrap pre{white-space:pre;word-wrap:normal}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #dddddf}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Are modules fast?</h1>
<div class="details">
<span id="author" class="author">Rene Rivera</span><br>
<span id="email" class="email"><a href="mailto:grafikrobot@gmail.com">grafikrobot@gmail.com</a></span><br>
<span id="revnumber"> D1441R1,</span>
<span id="revdate">2019-02-11</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_abstract">1. Abstract</a></li>
<li><a href="#_changes">2. Changes</a>
<ul class="sectlevel2">
<li><a href="#_r1">2.1. R1</a></li>
<li><a href="#_r0_initial">2.2. R0 (Initial)</a></li>
</ul>
</li>
<li><a href="#_introduction">3. Introduction</a></li>
<li><a href="#_parallel_build">4. Parallel Build</a>
<ul class="sectlevel2">
<li><a href="#_method">4.1. Method</a>
<ul class="sectlevel3">
<li><a href="#_modular_source">4.1.1. Modular Source</a></li>
<li><a href="#_non_modular_source">4.1.2. Non-modular Source</a></li>
</ul>
</li>
<li><a href="#_limitations">4.2. Limitations</a></li>
<li><a href="#_results">4.3. Results</a></li>
</ul>
</li>
<li><a href="#_conclusion">5. Conclusion</a></li>
<li><a href="#_acknowledgements">6. Acknowledgements</a></li>
<li><a href="#_references">7. References</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<style>
.admonitionblock .icon .title {
    font-size: 2.5em;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, .5);
}
.caution .icon .title {
    color: rgba(192, 51, 0, 1);
}
.important .icon .title {
    color: rgba(192, 0, 0, 1);
}
.note .icon .title {
    color: rgba(26, 64, 128, 1);
}
.tip .icon .title {
    color: rgba(255, 192, 0, 1);
}
.warning .icon .title {
    color: rgba(192, 102, 0, 1);
}
.hdlist p {
    margin-bottom: 0.25rem;
}
td.hdlist1, td.hdlist2 {
    padding-bottom: 0;
}
p,blockquote,dt,td.content,span.alt {
    font-size: 1.1rem
}
h1, h2, h3, h4, h5, h6 {
    font-weight: bold;
}
h1 {
    font-size: 2.25em;
}
h2 {
    font-size: 1.5em;
}
h3,#toctitle,.sidebarblock>.content>.title {
    font-size: 1.3em;
}
h4, h5 {
    font-size: 1.2em;
}
h6 {
    font-size: 1.1em;
}
</style>
<script src="echarts.min.js"></script>
<script src="build_chart.js"></script>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Document number
</td>
<td class="hdlist2">
<p>ISO/IEC/JTC1/SC22/WG21/D1441R1</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Date
</td>
<td class="hdlist2">
<p>2019-02-11</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Reply-to
</td>
<td class="hdlist2">
<p>Rene Rivera, <a href="mailto:grafikrobot@gmail.com">grafikrobot@gmail.com</a></p>
</td>
</tr>
<tr>
<td class="hdlist1">
Audience
</td>
<td class="hdlist2">
<p>WG21</p>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_abstract"><a class="anchor" href="#_abstract"></a>1. Abstract</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Measurements of the performance of building C++ modules and relevant comparisons.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_changes"><a class="anchor" href="#_changes"></a>2. Changes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_r1"><a class="anchor" href="#_r1"></a>2.1. R1</h3>
<div class="paragraph">
<p>Fix bug in test generation and DAG calculation that resulted in non-uniform
growth in the modular test times. Fix grammatical errors. Ran tests on a high
CPU machine from the GCC Farm Project. Additional data of parallel building
from higher thread and faster hardware, thanks to Robert Maynard for running
the tests and for the GCC Compile Farm for access to their machines. Replaced
simple level based scheduler with a full parallel DAG executor to avoid
CPU underutilization. Support for Clang 7.0.1 module compilation for alternate
data.</p>
</div>
</div>
<div class="sect2">
<h3 id="_r0_initial"><a class="anchor" href="#_r0_initial"></a>2.2. R0 (Initial)</h3>
<div class="paragraph">
<p>Initial performance measurements for synthetic tests of gcc merged modules
implementation (rev 268043, 2019-01-17 10:58:47 -0600 (Thu, 17 Jan 2019)) .</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction"><a class="anchor" href="#_introduction"></a>3. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>One of the stated goals of the modules proposals was performance over existing
non-modular source specifically in terms of scalable builds. This paper aims to
answer the important question of whether that goal was achieved by current
modules implementations.</p>
</div>
<div class="paragraph">
<p>Building software does not happen in the solitude of the C++ compiler. It is
a careful orchestration of a collection of tools from the preprocessor,
compiler, linker, assembler, etc controlled by the build system. These have
all been optimized to deal with the current separate compilation model and
generally perform gargantuan feats. But as such it means that performance
measurement needs to take into account, to some degree, all those in a
controlled method to generate meaningful measurements.</p>
</div>
<div class="paragraph">
<p>To that end the measurements presented here are "synthetic". They are structured
such that they simulate and isolate certain components, like the build system,
to facilitate the extraction of relevance in the data. Such methods are
described below for individual measurements.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_parallel_build"><a class="anchor" href="#_parallel_build"></a>4. Parallel Build</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Although there are various aspects comprising performance scalability of key
interest is in seeing how the potential algorithmic savings of modules "caching"
compiler work at the cost of longer DAG build chains compares against the current,
almost unlimited, parallelized building of plain source compiles. This test aims
to measure the overall compile times of modular source across varied dependency
chain depth against equivalent non-modular source.</p>
</div>
<div class="sect2">
<h3 id="_method"><a class="anchor" href="#_method"></a>4.1. Method</h3>
<div class="paragraph">
<p>Overall we perform the basic task of compiling 150 C++ source files into
corresponding object files only. We perform the compile at different dependency
DAG chain depth counts. Each source depends, either as an <code>import</code> or
<code>#include</code>, on some number of sources (headers or modules) from the
previous DAG levels. Which means that at DAG level 150 each source depends on
at least the one source from the previous DAG level. The overall wall clock
time to compile all 150 files is taken as the result of the measurements.
An important observation is that at the highest DAG depth the arrangement
creates a completely linear dependency chain.</p>
</div>
<div class="sect3">
<h4 id="_modular_source"><a class="anchor" href="#_modular_source"></a>4.1.1. Modular Source</h4>
<div class="paragraph">
<p>For modular source this test simulates the behavior of a build system to
compile individual modular source files in parallel executions of the
compiler to the limit of the available CPU threads. It does so in
appropriate, but simulated, dependency DAG order; compiling each DAG
level as a group. The process goes as such:</p>
</div>
<div class="paragraph">
<p>1) Generate a synthetic, and simplified, DAG to describe the build. Where
all the sources in the level can be compiled in parallel.</p>
</div>
<div class="paragraph">
<p>2) Generate all source files similar to this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">export module m148;

import m0;
import m15;
import m84;

namespace m148_ns
{
export int n = 0;
export int i1 = 1;
// ...
export int i300 = 300;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where the imports are randomly chosen from the set of all already compiled
modules (in previous DAG levels).</p>
</div>
<div class="paragraph">
<p>3) For each DAG level compile all the source files therein with a GCC invocation
similar to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">g++ -fmodules-ts -c -O0 m148.cpp</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_non_modular_source"><a class="anchor" href="#_non_modular_source"></a>4.1.2. Non-modular Source</h4>
<div class="paragraph">
<p>For no-modular source this test simulates the behavior of a build system to
compile individually all source files in parallel executions of the
compiler to the limit of the available CPU threads. As the non-modular
sources only depend on already existing header source files all source
files can be attempted to be compiled at once. The process goes as such:</p>
</div>
<div class="paragraph">
<p>1) Generate a synthetic, and simplified, DAG to describe the build with
parity to the modular build. But which is not used in the build itself.</p>
</div>
<div class="paragraph">
<p>2) Generate all source header files similar to this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">#ifndef H_GUARD_h148
#define H_GUARD_h148
#include "h77.hpp"
#include "h78.hpp"
#include "h92.hpp"


namespace h148_ns
{
int n = 0;
int i1 = 1;
// ...
int i300 = 300;
}
#endif</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where the includes are randomly chosen from the set of all headers files in
previous DAG levels. Although not needed to limit to previous DAG levels
this is done to keep parity with the modular source in terms of statistical
complexity of the included source size.</p>
</div>
<div class="paragraph">
<p>3) Generate all source files similar to this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">#include "h148.hpp"</code></pre>
</div>
</div>
<div class="paragraph">
<p>4) Compile all source files as one group with a GCC invocation similar to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">g++ -c -O0 h148.cpp</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_limitations"><a class="anchor" href="#_limitations"></a>4.2. Limitations</h3>
<div class="paragraph">
<p>This test has some real-life limitations borne out of the software and hardware
used for testing. Some of these limitations were discovered through
experimentation, for example with internal compiler errors.</p>
</div>
<div class="paragraph">
<p>Being an experimental language feature the support for compiling modules is
fragile and placed severe limits on what the modular sources could contain:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Most current C++ constructs fail to compile reliably on GCC, for example
templates, and cause ICEs. This is why the generated sources only contain
<code>int</code> variable definitions.</p>
</li>
<li>
<p>Along that same line the current GCC modular compiler also seems to have
stability limits on how many imports can be done. This is why only a maximum
of three (3) <code>import</code> statements are included in the source. As the compiler
errors with four (4) or more <code>import</code> statements.</p>
</li>
<li>
<p>Not to be outdone, compiling the header test also has one limitation. The
GCC and Clang compilers have a hard limit of number of include header depth
of 150. Which is why the tests only cover up to 150 files and consequently a
matching DAG depth.</p>
</li>
<li>
<p>The Clang compiler does not implement the merged modules proposal. Which
means we avoid features like the global fragment module when generating test
source.</p>
</li>
<li>
<p>The Clang compiler uses two stages for modules. One to generate the BMI and
another to generate the object code. This potentially increases the amount
of parallelism but also increases the number of processes that need to run.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This is a simulation with "perfect" build knowledge as all dependency and source
information is known before building starts. Hence it is only a very rough
approximation of reality where build system have to deal with dependency
discovery while building and in the face of generated source files.</p>
</div>
<div class="paragraph">
<p>The executor that schedules build commands is greedy and executes the first
available task as soon as there&#8217;s a slot for it.</p>
</div>
<div class="paragraph">
<p>There is some amount of overhead on the Python side for running the threads
in the executor. But this is stable through the lifetime of each test rune,
and hence can be ignored as we only care about relative performance.</p>
</div>
<div style="page-break-before: always"></div>
</div>
<div class="sect2">
<h3 id="_results"><a class="anchor" href="#_results"></a>4.3. Results</h3>
<div class="paragraph">
<p>The charts below use a triangle icon for non-modular builds, and a circle for
modular builds.</p>
</div>
<div id="parallel_build" style="height: 400px;"></div>
<script type="text/javascript">
create_parallel_build_chart_multi(
'parallel_build',
{
    text: 'Jobs: 8',
    subtext: 'Coqui: Intel Mobile Core i7 "Haswell/Crystalwell" (I7-4870HQ) @ 2.5GHz (4 physical cores / 8 threads)'
},
[
'GCC',
[
  [
    "dag_depth",
    "headers",
    "modules"
  ],
  [
    1,
    1.3630662630312145,
    1.7134710529935546
  ],
  [
    8,
    4.210827824485023,
    1.894232775492128
  ],
  [
    15,
    7.935951556020882,
    2.2248267240356654
  ],
  [
    22,
    9.92544209654443,
    2.723262679995969
  ],
  [
    29,
    11.843900447478518,
    3.40103889699094
  ],
  [
    36,
    12.58779603347648,
    3.795706033532042
  ],
  [
    43,
    12.127230401034467,
    4.144245713483542
  ],
  [
    50,
    12.030434748041444,
    6.851156251912471
  ],
  [
    57,
    12.127824961440638,
    7.893644323514309
  ],
  [
    64,
    12.85310627304716,
    7.950215476914309
  ],
  [
    71,
    12.892608289490454,
    7.791405098512769
  ],
  [
    78,
    12.459077265521046,
    8.139543496479746
  ],
  [
    85,
    13.22375932248542,
    8.069922091031913
  ],
  [
    92,
    12.777929519477766,
    8.15732056798879
  ],
  [
    99,
    13.229604338528588,
    8.14479286200367
  ],
  [
    106,
    13.706727111479267,
    8.207121840969194
  ],
  [
    113,
    14.066543977009133,
    8.1365684819757
  ],
  [
    120,
    14.472789960564114,
    8.17752335453406
  ],
  [
    127,
    14.557858631480485,
    8.208739801018964
  ],
  [
    134,
    14.966039325518068,
    8.208367806044407
  ],
  [
    141,
    16.276126157026738,
    8.241428027511574
  ],
  [
    148,
    15.231143123994116,
    8.274362157506403
  ]
]
,'Clang',
[
  [
    "dag_depth",
    "headers",
    "modules"
  ],
  [
    1,
    1.14206943748286,
    2.4651431730017066
  ],
  [
    8,
    3.0956481390167028,
    2.784908032452222
  ],
  [
    15,
    6.485268608026672,
    3.172507735027466
  ],
  [
    22,
    8.150119955535047,
    3.4531392415519804
  ],
  [
    29,
    8.25855071702972,
    4.384782279492356
  ],
  [
    36,
    8.85923774150433,
    4.723884564009495
  ],
  [
    43,
    9.275928059942089,
    7.048950252472423
  ],
  [
    50,
    9.222736340481788,
    5.274169205978978
  ],
  [
    57,
    9.472263747476973,
    13.77654441143386
  ],
  [
    64,
    9.453780272509903,
    13.516011136467569
  ],
  [
    71,
    9.71620221750345,
    13.415868477954064
  ],
  [
    78,
    9.598201951535884,
    14.434235855471343
  ],
  [
    85,
    10.000214409956243,
    14.238269038498402
  ],
  [
    92,
    10.074702206999063,
    14.575852334033698
  ],
  [
    99,
    10.337825467460789,
    14.725195239530876
  ],
  [
    106,
    10.576102378545329,
    14.42123732395703
  ],
  [
    113,
    10.723600941943005,
    14.671503858990036
  ],
  [
    120,
    11.294528578524478,
    14.843390060937963
  ],
  [
    127,
    11.261769271979574,
    15.004757709510159
  ],
  [
    134,
    12.53398731595371,
    15.68075984006282
  ],
  [
    141,
    12.226686198438983,
    15.121556013997179
  ],
  [
    148,
    11.774005353508983,
    15.238353751017712
  ]
]
]
);
</script>
<div class="paragraph">
<p>First looking at the GCC performance, the solid lines, we can see that
modular compiles have a consistent advantage over all DAG depths. Although
the modular compiles rise slightly at the start they flatten out for most
of the DAG depths. Whereas the non-modular compiles initially rise
quickly and then a bit slower. But they still rise over time as more
source code is consumed from the deepening header inclusions. This
certainly looks really good for a modular future.</p>
</div>
<div class="paragraph">
<p>Now, lets look at Clang, the dashed lines, like GCC it starts out
performing along the same scale of performance at lower DAG depths. But,
alarmingly, at the 1/3 point it jumps in time to instead, surprisingly,
follow the GCC non-modular compile performance. While at the same time
the non-modular Clang compiles perform considerably better, but still
linear. Another observation worth noting is that at the lower DAG depths
GCC performs slightly better than Clang. This is likely from Clang test
doing two compile invocations to generate the equivalent BMI and object
data.</p>
</div>
<div class="paragraph">
<p>Even with the bad news of Clang at high DAG depths this looks promising.
Both compilers perform very well at the not high DAG depths and scale
well as DAG depth increases. But this is at what is considered low
parallelism levels. Even phones are approaching this level of performance.</p>
</div>
<div class="paragraph">
<p>Lets now look at higher levels of parallelism with a machine that has only
slightly lower CPU core speed but is capable of executing up 128 threads
with its 32 physical cores. The first sample set is a base line comparison
at 8 parallel jobs. As we can see it performs comparably with the above
results. The one big difference is that now GCC non-modular performs better
than the Clang non-modular builds.</p>
</div>
<div id="parallel_build_gcc135_8" style="height: 400px;"></div>
<script type="text/javascript">
create_parallel_build_chart_multi(
'parallel_build_gcc135_8',
{
    text: 'Jobs: 8',
    subtext: 'GCC135: POWER9, altivec supported 2.2 (pvr 004e 1202) @ 2.166GHz (2 CPU, 32 cores, 128 threads)'
},
[
'GCC',
[
  [
    "dag_depth",
    "headers",
    "modules"
  ],
  [
    1,
    0.5671260356903076,
    0.7387864589691162
  ],
  [
    8,
    2.8128163814544678,
    0.8128764629364014
  ],
  [
    15,
    5.425332069396973,
    1.3317440748214722
  ],
  [
    22,
    7.385198950767517,
    1.7993245124816895
  ],
  [
    29,
    8.34084153175354,
    1.8963334560394287
  ],
  [
    36,
    8.910861372947693,
    3.140405535697937
  ],
  [
    43,
    9.588963985443115,
    5.340320467948914
  ],
  [
    50,
    9.925995588302612,
    4.047579407691956
  ],
  [
    57,
    10.292039155960083,
    5.669378399848938
  ],
  [
    64,
    10.733435988426208,
    6.505755424499512
  ],
  [
    71,
    10.574966073036194,
    6.440475106239319
  ],
  [
    78,
    11.393059015274048,
    6.62867546081543
  ],
  [
    85,
    11.228329539299011,
    6.70383894443512
  ],
  [
    92,
    11.143437385559082,
    6.683733940124512
  ],
  [
    99,
    11.569972515106201,
    6.693559527397156
  ],
  [
    106,
    11.668722033500671,
    6.736942410469055
  ],
  [
    113,
    12.057024598121643,
    6.763150572776794
  ],
  [
    120,
    13.042596936225891,
    6.845744490623474
  ],
  [
    127,
    12.86086905002594,
    6.865799069404602
  ],
  [
    134,
    12.92196500301361,
    6.867794990539551
  ],
  [
    141,
    13.164848446846008,
    6.968837022781372
  ],
  [
    148,
    14.156316041946411,
    6.9981114864349365
  ]
]
,'Clang',
[
  [
    "dag_depth",
    "headers",
    "modules"
  ],
  [
    1,
    0.8017085790634155,
    1.6417189836502075
  ],
  [
    8,
    3.7756805419921875,
    2.04287052154541
  ],
  [
    15,
    6.795816421508789,
    2.427203059196472
  ],
  [
    22,
    9.412424445152283,
    4.529745101928711
  ],
  [
    29,
    11.509505987167358,
    7.14374303817749
  ],
  [
    36,
    12.402507066726685,
    7.189236998558044
  ],
  [
    43,
    12.320728540420532,
    7.978350043296814
  ],
  [
    50,
    13.472419500350952,
    13.445721626281738
  ],
  [
    57,
    13.319713592529297,
    16.225449562072754
  ],
  [
    64,
    14.142181992530823,
    16.885502576828003
  ],
  [
    71,
    14.145864963531494,
    17.30705201625824
  ],
  [
    78,
    14.850876092910767,
    17.495519161224365
  ],
  [
    85,
    14.379704475402832,
    17.85282552242279
  ],
  [
    92,
    14.957503914833069,
    17.546106934547424
  ],
  [
    99,
    15.237177014350891,
    17.674274563789368
  ],
  [
    106,
    15.308051943778992,
    17.897619605064392
  ],
  [
    113,
    16.016977548599243,
    18.072384476661682
  ],
  [
    120,
    16.01928699016571,
    18.30976688861847
  ],
  [
    127,
    16.283726453781128,
    18.33886957168579
  ],
  [
    134,
    16.969957947731018,
    18.50194251537323
  ],
  [
    141,
    16.70580303668976,
    18.559778094291687
  ],
  [
    148,
    17.194711089134216,
    18.713966488838196
  ]
]
]
);
</script>
<div class="paragraph">
<p>We&#8217;ll now jump to 16 parallel jobs and onward step incrementally 16 jobs at a
time until we reach the machine thread maximum of 128.</p>
</div>
<div id="parallel_build_gcc135_16" style="height: 400px;"></div>
<script type="text/javascript">
create_parallel_build_chart_multi(
'parallel_build_gcc135_16',
{
    text: 'Jobs: 16',
    subtext: 'GCC135: POWER9, altivec supported 2.2 (pvr 004e 1202) @ 2.166GHz (2 CPU, 32 cores, 128 threads)'
},
[
'GCC',
[
  [
    "dag_depth",
    "headers",
    "modules"
  ],
  [
    1,
    0.4072641134262085,
    0.5615769624710083
  ],
  [
    8,
    2.087931990623474,
    0.706877589225769
  ],
  [
    15,
    3.8028218746185303,
    1.0262950658798218
  ],
  [
    22,
    4.822325944900513,
    2.3118720054626465
  ],
  [
    29,
    4.75451397895813,
    3.060710072517395
  ],
  [
    36,
    5.987977027893066,
    5.6869800090789795
  ],
  [
    43,
    6.265423536300659,
    5.40498149394989
  ],
  [
    50,
    6.869678616523743,
    5.978893518447876
  ],
  [
    57,
    7.093350410461426,
    6.229304552078247
  ],
  [
    64,
    7.2971614599227905,
    6.3532140254974365
  ],
  [
    71,
    7.0272910594940186,
    6.864161491394043
  ],
  [
    78,
    7.5845149755477905,
    7.311127543449402
  ],
  [
    85,
    8.269426465034485,
    6.889272928237915
  ],
  [
    92,
    6.71099054813385,
    6.8502784967422485
  ],
  [
    99,
    8.145728588104248,
    6.861655950546265
  ],
  [
    106,
    8.161642074584961,
    6.816552519798279
  ],
  [
    113,
    8.08260989189148,
    6.848904490470886
  ],
  [
    120,
    7.3047425746917725,
    6.814877510070801
  ],
  [
    127,
    7.072234034538269,
    6.892274975776672
  ],
  [
    134,
    7.251498579978943,
    6.934775471687317
  ],
  [
    141,
    7.314914584159851,
    6.930670976638794
  ],
  [
    148,
    7.440419554710388,
    6.972957491874695
  ]
]
,'Clang',
[
  [
    "dag_depth",
    "headers",
    "modules"
  ],
  [
    1,
    0.4899674654006958,
    0.9865355491638184
  ],
  [
    8,
    2.2808886766433716,
    1.147557020187378
  ],
  [
    15,
    4.264318943023682,
    2.0005733966827393
  ],
  [
    22,
    5.627946138381958,
    5.467279076576233
  ],
  [
    29,
    6.6704630851745605,
    5.636364936828613
  ],
  [
    36,
    6.906417608261108,
    12.392834067344666
  ],
  [
    43,
    7.096288561820984,
    12.98107647895813
  ],
  [
    50,
    6.921174883842468,
    11.609018087387085
  ],
  [
    57,
    8.729408979415894,
    17.307525515556335
  ],
  [
    64,
    7.984735012054443,
    17.65988516807556
  ],
  [
    71,
    8.26295804977417,
    17.348925948143005
  ],
  [
    78,
    8.342219114303589,
    18.400514960289
  ],
  [
    85,
    8.532777070999146,
    18.52412259578705
  ],
  [
    92,
    8.221618175506592,
    18.07835590839386
  ],
  [
    99,
    8.434222936630249,
    18.129296898841858
  ],
  [
    106,
    8.691932916641235,
    18.56864905357361
  ],
  [
    113,
    8.973657846450806,
    18.67020034790039
  ],
  [
    120,
    9.297525525093079,
    18.857670068740845
  ],
  [
    127,
    9.15495753288269,
    18.618273615837097
  ],
  [
    134,
    9.580812335014343,
    18.96445643901825
  ],
  [
    141,
    9.53924548625946,
    19.060834527015686
  ],
  [
    148,
    9.690840005874634,
    19.28023898601532
  ]
]
]
);
</script>
<div class="paragraph">
<p>Immediately we can see that the non-modular builds roughly half in clock time
matching the doubling of the available parallelism. And are now very close to
the performance of GCC modular builds. What is striking is that the modular
builds don&#8217;t substantially change from the 8 parallel job case.</p>
</div>
<div id="parallel_build_gcc135_32" style="height: 400px;"></div>
<script type="text/javascript">
create_parallel_build_chart_multi(
'parallel_build_gcc135_32',
{
    text: 'Jobs: 32',
    subtext: 'GCC135: POWER9, altivec supported 2.2 (pvr 004e 1202) @ 2.166GHz (2 CPU, 32 cores, 128 threads)'
},
[
'GCC',
[
  [
    "dag_depth",
    "headers",
    "modules"
  ],
  [
    1,
    0.3439290523529053,
    0.3644745349884033
  ],
  [
    8,
    1.33935546875,
    0.5027331113815308
  ],
  [
    15,
    2.5491650104522705,
    0.9656829833984375
  ],
  [
    22,
    3.2872709035873413,
    1.969763994216919
  ],
  [
    29,
    3.566878080368042,
    4.897047400474548
  ],
  [
    36,
    4.375118374824524,
    4.021157503128052
  ],
  [
    43,
    4.300699949264526,
    4.343747496604919
  ],
  [
    50,
    4.6817814111709595,
    6.434557557106018
  ],
  [
    57,
    4.366023659706116,
    6.261536002159119
  ],
  [
    64,
    4.549574375152588,
    6.88897442817688
  ],
  [
    71,
    4.978693604469299,
    6.968995451927185
  ],
  [
    78,
    5.1024874448776245,
    7.592769503593445
  ],
  [
    85,
    5.263536095619202,
    6.735424041748047
  ],
  [
    92,
    4.8793851137161255,
    6.720954060554504
  ],
  [
    99,
    5.110540866851807,
    6.9995986223220825
  ],
  [
    106,
    5.233916997909546,
    7.117303133010864
  ],
  [
    113,
    5.578985929489136,
    6.9188079833984375
  ],
  [
    120,
    5.6177979707717896,
    6.91713547706604
  ],
  [
    127,
    5.632856369018555,
    7.159958481788635
  ],
  [
    134,
    7.80876886844635,
    7.069393038749695
  ],
  [
    141,
    5.805091381072998,
    7.450555920600891
  ],
  [
    148,
    5.731057524681091,
    6.991324543952942
  ]
]
,'Clang',
[
  [
    "dag_depth",
    "headers",
    "modules"
  ],
  [
    1,
    0.3575775623321533,
    0.7364548444747925
  ],
  [
    8,
    1.6345430612564087,
    1.029649019241333
  ],
  [
    15,
    3.3040075302124023,
    1.731209397315979
  ],
  [
    22,
    4.015156865119934,
    6.000101089477539
  ],
  [
    29,
    4.7945743799209595,
    5.429731369018555
  ],
  [
    36,
    5.137338042259216,
    11.307317614555359
  ],
  [
    43,
    4.906491041183472,
    16.655614018440247
  ],
  [
    50,
    5.489593029022217,
    15.628769993782043
  ],
  [
    57,
    5.544792413711548,
    17.333008527755737
  ],
  [
    64,
    5.733753085136414,
    17.25002658367157
  ],
  [
    71,
    5.732562065124512,
    17.623450994491577
  ],
  [
    78,
    6.105775594711304,
    18.224273562431335
  ],
  [
    85,
    6.2499788999557495,
    18.4409019947052
  ],
  [
    92,
    6.1373701095581055,
    18.65612804889679
  ],
  [
    99,
    7.283707022666931,
    20.10229206085205
  ],
  [
    106,
    7.3365665674209595,
    20.288461089134216
  ],
  [
    113,
    7.637263536453247,
    19.98394000530243
  ],
  [
    120,
    7.923033952713013,
    20.0220764875412
  ],
  [
    127,
    7.501369476318359,
    19.193603038787842
  ],
  [
    134,
    6.720263361930847,
    19.37486457824707
  ],
  [
    141,
    6.858539462089539,
    19.418099403381348
  ],
  [
    148,
    7.0053499937057495,
    19.556841492652893
  ]
]
]
);
</script>
<div id="parallel_build_gcc135_48" style="height: 400px;"></div>
<script type="text/javascript">
create_parallel_build_chart_multi(
'parallel_build_gcc135_48',
{
    text: 'Jobs: 48',
    subtext: 'GCC135: POWER9, altivec supported 2.2 (pvr 004e 1202) @ 2.166GHz (2 CPU, 32 cores, 128 threads)'
},
[
'GCC',
[
  [
    "dag_depth",
    "headers",
    "modules"
  ],
  [
    1,
    0.3813924789428711,
    0.41112959384918213
  ],
  [
    8,
    1.2480233907699585,
    0.5755225419998169
  ],
  [
    15,
    2.2557270526885986,
    1.2501025199890137
  ],
  [
    22,
    2.7870633602142334,
    2.8977590799331665
  ],
  [
    29,
    3.4823795557022095,
    2.503339648246765
  ],
  [
    36,
    3.4565216302871704,
    3.158136487007141
  ],
  [
    43,
    3.7702105045318604,
    6.18445611000061
  ],
  [
    50,
    3.968091607093811,
    5.337350487709045
  ],
  [
    57,
    4.1406519412994385,
    6.572016358375549
  ],
  [
    64,
    4.155381560325623,
    6.146936416625977
  ],
  [
    71,
    4.464394569396973,
    6.5716869831085205
  ],
  [
    78,
    4.427631616592407,
    6.775662422180176
  ],
  [
    85,
    4.451382160186768,
    6.820724010467529
  ],
  [
    92,
    4.620321035385132,
    6.868501543998718
  ],
  [
    99,
    4.58150839805603,
    6.853671550750732
  ],
  [
    106,
    4.669292092323303,
    6.854983448982239
  ],
  [
    113,
    4.817722916603088,
    6.9346466064453125
  ],
  [
    120,
    4.920111894607544,
    6.963698506355286
  ],
  [
    127,
    4.9389331340789795,
    6.929472088813782
  ],
  [
    134,
    5.035935401916504,
    7.005605459213257
  ],
  [
    141,
    5.217130541801453,
    7.059708952903748
  ],
  [
    148,
    5.285883069038391,
    7.065042018890381
  ]
]
,'Clang',
[
  [
    "dag_depth",
    "headers",
    "modules"
  ],
  [
    1,
    0.3931335210800171,
    0.8313045501708984
  ],
  [
    8,
    1.4611256122589111,
    0.8779764175415039
  ],
  [
    15,
    2.592492461204529,
    1.7815145254135132
  ],
  [
    22,
    3.6367019414901733,
    3.2422139644622803
  ],
  [
    29,
    4.191550970077515,
    6.048084378242493
  ],
  [
    36,
    4.049492955207825,
    7.320496439933777
  ],
  [
    43,
    4.330530524253845,
    13.109274625778198
  ],
  [
    50,
    4.571543455123901,
    10.34505295753479
  ],
  [
    57,
    4.538983464241028,
    8.903879046440125
  ],
  [
    64,
    4.665802001953125,
    15.04343855381012
  ],
  [
    71,
    4.893931031227112,
    17.875264406204224
  ],
  [
    78,
    5.128103971481323,
    18.006962537765503
  ],
  [
    85,
    5.147187948226929,
    18.03608536720276
  ],
  [
    92,
    5.292448043823242,
    18.1355539560318
  ],
  [
    99,
    5.391749978065491,
    18.203921914100647
  ],
  [
    106,
    5.623633027076721,
    18.26190948486328
  ],
  [
    113,
    5.675801992416382,
    18.22542703151703
  ],
  [
    120,
    5.794230937957764,
    18.292957067489624
  ],
  [
    127,
    6.098067998886108,
    18.46604061126709
  ],
  [
    134,
    6.092175126075745,
    18.72851800918579
  ],
  [
    141,
    6.257909417152405,
    18.854666113853455
  ],
  [
    148,
    6.368229985237122,
    19.02475595474243
  ]
]
]
);
</script>
<div class="paragraph">
<p>As we can see the increasing number of parallel jobs keeps improving the
performance of the non-modular builds while the modular builds are
consistent. By now the non-modular builds are always faster at DAG depths
43 onward.</p>
</div>
<div id="parallel_build_gcc135_64" style="height: 400px;"></div>
<script type="text/javascript">
create_parallel_build_chart_multi(
'parallel_build_gcc135_64',
{
    text: 'Jobs: 64',
    subtext: 'GCC135: POWER9, altivec supported 2.2 (pvr 004e 1202) @ 2.166GHz (2 CPU, 32 cores, 128 threads)'
},
[
'GCC',
[
  [
    "dag_depth",
    "headers",
    "modules"
  ],
  [
    1,
    0.4294445514678955,
    0.4455099105834961
  ],
  [
    8,
    1.1896361112594604,
    0.5734440088272095
  ],
  [
    15,
    2.0610605478286743,
    1.1376794576644897
  ],
  [
    22,
    2.6593804359436035,
    1.449425458908081
  ],
  [
    29,
    3.0295311212539673,
    4.125088572502136
  ],
  [
    36,
    3.2079485654830933,
    3.009710431098938
  ],
  [
    43,
    3.229511022567749,
    6.196008563041687
  ],
  [
    50,
    3.3935935497283936,
    6.041448950767517
  ],
  [
    57,
    3.6288779973983765,
    6.675055503845215
  ],
  [
    64,
    3.818548560142517,
    6.742620944976807
  ],
  [
    71,
    3.7784125804901123,
    6.672988533973694
  ],
  [
    78,
    3.8730310201644897,
    6.79936146736145
  ],
  [
    85,
    3.941053628921509,
    6.841904878616333
  ],
  [
    92,
    4.143879532814026,
    6.84672212600708
  ],
  [
    99,
    4.224398612976074,
    6.901408910751343
  ],
  [
    106,
    4.157301545143127,
    6.948182582855225
  ],
  [
    113,
    4.2400981187820435,
    6.957635998725891
  ],
  [
    120,
    4.441891551017761,
    6.995262980461121
  ],
  [
    127,
    4.448513984680176,
    7.017768979072571
  ],
  [
    134,
    4.639655590057373,
    7.061481952667236
  ],
  [
    141,
    4.634655117988586,
    7.082804918289185
  ],
  [
    148,
    4.734035015106201,
    7.138922095298767
  ]
]
,'Clang',
[
  [
    "dag_depth",
    "headers",
    "modules"
  ],
  [
    1,
    0.4525740146636963,
    0.9421465396881104
  ],
  [
    8,
    1.5003784894943237,
    1.0075520277023315
  ],
  [
    15,
    2.5522685050964355,
    1.6085829734802246
  ],
  [
    22,
    3.0945850610733032,
    4.5726929903030396
  ],
  [
    29,
    3.416104555130005,
    8.064425945281982
  ],
  [
    36,
    3.6460673809051514,
    7.427046060562134
  ],
  [
    43,
    3.982629895210266,
    14.046301484107971
  ],
  [
    50,
    4.485514044761658,
    13.112791061401367
  ],
  [
    57,
    4.396490573883057,
    17.537219405174255
  ],
  [
    64,
    4.473744034767151,
    16.693111896514893
  ],
  [
    71,
    4.555012941360474,
    18.115784525871277
  ],
  [
    78,
    4.784508943557739,
    18.205666422843933
  ],
  [
    85,
    4.957488417625427,
    18.690096497535706
  ],
  [
    92,
    4.739882469177246,
    18.281397581100464
  ],
  [
    99,
    4.720614433288574,
    18.79099714756012
  ],
  [
    106,
    5.12354302406311,
    19.01525104045868
  ],
  [
    113,
    5.01746129989624,
    18.942447543144226
  ],
  [
    120,
    5.160091876983643,
    19.32519245147705
  ],
  [
    127,
    5.221848368644714,
    19.31078040599823
  ],
  [
    134,
    5.0746495723724365,
    19.48153853416443
  ],
  [
    141,
    5.310587525367737,
    19.63892698287964
  ],
  [
    148,
    5.412157893180847,
    19.773398995399475
  ]
]
]
);
</script>
<div id="parallel_build_gcc135_80" style="height: 400px;"></div>
<script type="text/javascript">
create_parallel_build_chart_multi(
'parallel_build_gcc135_80',
{
    text: 'Jobs: 80',
    subtext: 'GCC135: POWER9, altivec supported 2.2 (pvr 004e 1202) @ 2.166GHz (2 CPU, 32 cores, 128 threads)'
},
[
'GCC',
[
  [
    "dag_depth",
    "headers",
    "modules"
  ],
  [
    1,
    0.472459077835083,
    0.4919630289077759
  ],
  [
    8,
    1.1294654607772827,
    0.5049124956130981
  ],
  [
    15,
    1.9176039695739746,
    0.8905750513076782
  ],
  [
    22,
    2.3289369344711304,
    1.5414469242095947
  ],
  [
    29,
    2.4912115335464478,
    2.5627435445785522
  ],
  [
    36,
    2.6830939054489136,
    5.134526610374451
  ],
  [
    43,
    2.6264140605926514,
    6.506130576133728
  ],
  [
    50,
    2.933905005455017,
    6.543732047080994
  ],
  [
    57,
    2.843966007232666,
    6.295814037322998
  ],
  [
    64,
    3.0755934715270996,
    6.515035390853882
  ],
  [
    71,
    3.1695799827575684,
    6.58891499042511
  ],
  [
    78,
    3.129978895187378,
    6.83069109916687
  ],
  [
    85,
    3.096402883529663,
    6.873131513595581
  ],
  [
    92,
    3.157830595970154,
    6.916214346885681
  ],
  [
    99,
    3.239258050918579,
    6.927286982536316
  ],
  [
    106,
    3.2577515840530396,
    6.98265540599823
  ],
  [
    113,
    3.518872022628784,
    7.013333439826965
  ],
  [
    120,
    3.4445769786834717,
    7.044141530990601
  ],
  [
    127,
    3.4851208925247192,
    7.054183125495911
  ],
  [
    134,
    3.4403880834579468,
    7.109279990196228
  ],
  [
    141,
    3.5684165954589844,
    7.128596663475037
  ],
  [
    148,
    3.6353288888931274,
    7.175102591514587
  ]
]
,'Clang',
[
  [
    "dag_depth",
    "headers",
    "modules"
  ],
  [
    1,
    0.498926043510437,
    1.0485883951187134
  ],
  [
    8,
    1.2220385074615479,
    1.0406169891357422
  ],
  [
    15,
    2.4279249906539917,
    1.5685501098632812
  ],
  [
    22,
    2.644806385040283,
    2.3442054986953735
  ],
  [
    29,
    2.872310996055603,
    3.926127076148987
  ],
  [
    36,
    3.192307949066162,
    13.01618492603302
  ],
  [
    43,
    3.497592568397522,
    12.158764958381653
  ],
  [
    50,
    3.6003600358963013,
    16.196781039237976
  ],
  [
    57,
    3.4035239219665527,
    17.753047943115234
  ],
  [
    64,
    3.4709044694900513,
    17.930275917053223
  ],
  [
    71,
    3.6443819999694824,
    17.68316638469696
  ],
  [
    78,
    3.642418384552002,
    18.579327940940857
  ],
  [
    85,
    3.8400633335113525,
    18.6037859916687
  ],
  [
    92,
    3.87537157535553,
    18.818094968795776
  ],
  [
    99,
    3.87193500995636,
    18.857823967933655
  ],
  [
    106,
    4.044861078262329,
    19.03056263923645
  ],
  [
    113,
    4.164112329483032,
    19.209360361099243
  ],
  [
    120,
    4.253201961517334,
    19.252329111099243
  ],
  [
    127,
    4.167165040969849,
    19.55806851387024
  ],
  [
    134,
    4.141818523406982,
    19.580935955047607
  ],
  [
    141,
    4.327582478523254,
    19.652411103248596
  ],
  [
    148,
    4.455724000930786,
    20.305369019508362
  ]
]
]
);
</script>
<div id="parallel_build_gcc135_96" style="height: 400px;"></div>
<script type="text/javascript">
create_parallel_build_chart_multi(
'parallel_build_gcc135_96',
{
    text: 'Jobs: 96',
    subtext: 'GCC135: POWER9, altivec supported 2.2 (pvr 004e 1202) @ 2.166GHz (2 CPU, 32 cores, 128 threads)'
},
[
'GCC',
[
  [
    "dag_depth",
    "headers",
    "modules"
  ],
  [
    1,
    0.48374509811401367,
    0.5029730796813965
  ],
  [
    8,
    1.0754845142364502,
    0.5251549482345581
  ],
  [
    15,
    1.589967966079712,
    0.9165220260620117
  ],
  [
    22,
    1.9594975709915161,
    1.9144569635391235
  ],
  [
    29,
    2.1132545471191406,
    3.7179648876190186
  ],
  [
    36,
    2.510039448738098,
    3.691842555999756
  ],
  [
    43,
    2.439455032348633,
    6.1800830364227295
  ],
  [
    50,
    2.6614716053009033,
    6.353284955024719
  ],
  [
    57,
    2.8203325271606445,
    6.697699546813965
  ],
  [
    64,
    2.9788565635681152,
    6.740452885627747
  ],
  [
    71,
    2.9762070178985596,
    6.649338960647583
  ],
  [
    78,
    3.084448456764221,
    6.924884915351868
  ],
  [
    85,
    3.110311985015869,
    6.940437078475952
  ],
  [
    92,
    3.193479895591736,
    6.951582551002502
  ],
  [
    99,
    3.077741026878357,
    6.955111026763916
  ],
  [
    106,
    3.1578590869903564,
    7.00228750705719
  ],
  [
    113,
    3.2452651262283325,
    7.051385045051575
  ],
  [
    120,
    3.2724759578704834,
    7.09372091293335
  ],
  [
    127,
    3.310258626937866,
    7.119941473007202
  ],
  [
    134,
    3.4076589345932007,
    7.115468978881836
  ],
  [
    141,
    3.5799366235733032,
    7.152565956115723
  ],
  [
    148,
    3.564379930496216,
    7.2038198709487915
  ]
]
,'Clang',
[
  [
    "dag_depth",
    "headers",
    "modules"
  ],
  [
    1,
    0.4946596622467041,
    1.1116135120391846
  ],
  [
    8,
    1.2530889511108398,
    1.1427124738693237
  ],
  [
    15,
    1.9685955047607422,
    1.278638482093811
  ],
  [
    22,
    2.476620078086853,
    2.6700304746627808
  ],
  [
    29,
    2.786107897758484,
    4.54848313331604
  ],
  [
    36,
    3.016394019126892,
    6.771883964538574
  ],
  [
    43,
    3.11016309261322,
    8.378407597541809
  ],
  [
    50,
    3.4513384103775024,
    15.464584469795227
  ],
  [
    57,
    3.286536455154419,
    15.970893025398254
  ],
  [
    64,
    3.5353004932403564,
    13.736423015594482
  ],
  [
    71,
    3.5561771392822266,
    16.199998021125793
  ],
  [
    78,
    3.6796250343322754,
    17.740276098251343
  ],
  [
    85,
    3.781736135482788,
    17.676672101020813
  ],
  [
    92,
    3.8511539697647095,
    15.929895401000977
  ],
  [
    99,
    3.7535436153411865,
    18.13276994228363
  ],
  [
    106,
    3.8325130939483643,
    18.50315761566162
  ],
  [
    113,
    3.8557989597320557,
    18.604995369911194
  ],
  [
    120,
    3.9607675075531006,
    18.70592451095581
  ],
  [
    127,
    4.155877947807312,
    18.874709486961365
  ],
  [
    134,
    4.195631980895996,
    18.98409068584442
  ],
  [
    141,
    4.359696984291077,
    19.097050547599792
  ],
  [
    148,
    4.304264426231384,
    19.243147492408752
  ]
]
]
);
</script>
<div id="parallel_build_gcc135_128" style="height: 400px;"></div>
<script type="text/javascript">
create_parallel_build_chart_multi(
'parallel_build_gcc135_128',
{
    text: 'Jobs: 128',
    subtext: 'GCC135: POWER9, altivec supported 2.2 (pvr 004e 1202) @ 2.166GHz (2 CPU, 32 cores, 128 threads)'
},
[
'GCC',
[
  [
    "dag_depth",
    "headers",
    "modules"
  ],
  [
    1,
    0.4923025369644165,
    0.5078079700469971
  ],
  [
    8,
    1.140189528465271,
    0.5265053510665894
  ],
  [
    15,
    1.758959412574768,
    1.0289009809494019
  ],
  [
    22,
    1.8947004079818726,
    2.4725195169448853
  ],
  [
    29,
    2.245432138442993,
    4.417566537857056
  ],
  [
    36,
    2.42516553401947,
    3.72688364982605
  ],
  [
    43,
    2.668416380882263,
    5.710483908653259
  ],
  [
    50,
    2.7072983980178833,
    6.474582076072693
  ],
  [
    57,
    2.6275769472122192,
    6.416187524795532
  ],
  [
    64,
    2.73845899105072,
    6.182048439979553
  ],
  [
    71,
    2.843065857887268,
    6.753283977508545
  ],
  [
    78,
    2.8911229372024536,
    7.086020588874817
  ],
  [
    85,
    2.942891001701355,
    6.945706009864807
  ],
  [
    92,
    2.9648051261901855,
    7.00616180896759
  ],
  [
    99,
    3.0316615104675293,
    7.00879442691803
  ],
  [
    106,
    3.150036931037903,
    7.067765116691589
  ],
  [
    113,
    3.1764795780181885,
    7.086611986160278
  ],
  [
    120,
    3.121841549873352,
    7.177445411682129
  ],
  [
    127,
    3.304257035255432,
    7.161503553390503
  ],
  [
    134,
    3.2320663928985596,
    7.227605104446411
  ],
  [
    141,
    3.3527488708496094,
    7.264962553977966
  ],
  [
    148,
    3.3931409120559692,
    7.298771977424622
  ]
]
,'Clang',
[
  [
    "dag_depth",
    "headers",
    "modules"
  ],
  [
    1,
    0.4947284460067749,
    1.237202525138855
  ],
  [
    8,
    1.405920386314392,
    1.2654829025268555
  ],
  [
    15,
    1.952156662940979,
    1.355844497680664
  ],
  [
    22,
    2.389417052268982,
    4.273715496063232
  ],
  [
    29,
    2.7324856519699097,
    5.848226428031921
  ],
  [
    36,
    2.6767574548721313,
    7.583833932876587
  ],
  [
    43,
    2.7426249980926514,
    14.754263043403625
  ],
  [
    50,
    3.0593079328536987,
    11.8196120262146
  ],
  [
    57,
    3.132006049156189,
    13.90622103214264
  ],
  [
    64,
    2.9878214597702026,
    15.52534008026123
  ],
  [
    71,
    3.3771179914474487,
    17.563157081604004
  ],
  [
    78,
    3.4963059425354004,
    17.33402645587921
  ],
  [
    85,
    3.3044949769973755,
    17.967300534248352
  ],
  [
    92,
    3.4967644214630127,
    17.582948446273804
  ],
  [
    99,
    3.481552004814148,
    18.058111429214478
  ],
  [
    106,
    3.6046258211135864,
    18.024047017097473
  ],
  [
    113,
    3.56370747089386,
    18.83280646800995
  ],
  [
    120,
    3.6625269651412964,
    18.901829600334167
  ],
  [
    127,
    3.7470184564590454,
    19.222137928009033
  ],
  [
    134,
    3.820613980293274,
    19.129397988319397
  ],
  [
    141,
    3.8953455686569214,
    19.250890374183655
  ],
  [
    148,
    3.927485466003418,
    19.270569562911987
  ]
]
]
);
</script>
<div class="paragraph">
<p>We&#8217;ve now reached the point where non-modular builds are faster at all DAG
depths higher than 22. And while the modular builds have stayed the same in
the face of increasing parallelism, the non-modular builds have gained ground
at each step.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusion"><a class="anchor" href="#_conclusion"></a>5. Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With the limitations of the capabilities of current compilers one can only
conclude that modular builds could be advantageous at lower parallelism levels
environments. In other words, that modules currently do not scale in the same
ways as traditional compilation.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_acknowledgements"><a class="anchor" href="#_acknowledgements"></a>6. Acknowledgements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Thanks to Nathan Sidwell for the work to implement the latest merged modules
proposal in GCC. And the citizens of the Internet and more specifically the
contributors to StackOverflow for the hints that made it possible to
decipher how to get the GCC svn checkout to build in OSX.</p>
</div>
<div class="paragraph">
<p>And many thanks to Mathias Stearn for the logic on how to compile the Clang
modules. And Ninja generation for comparison in a different build system
context.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references"><a class="anchor" href="#_references"></a>7. References</h2>
<div class="sectionbody">
<div class="paragraph">
<p>GCC cxx-modules implementation, Nathan Sidwell
<a href="https://gcc.gnu.org/wiki/cxx-modules">https://gcc.gnu.org/wiki/cxx-modules</a></p>
</div>
<div class="paragraph">
<p>C++ Tooling Stats, Rene Rivera
<a href="https://github.com/bfgroup/cpp_tooling_stats">https://github.com/bfgroup/cpp_tooling_stats</a></p>
</div>
</div>
</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/github.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>