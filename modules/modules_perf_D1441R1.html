<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.8">
<meta name="author" content="Rene Rivera">
<meta name="copyright" content="Copyright 2019 Rene Rivera">
<title>Are modules fast?</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock pre.nowrap,.literalblock pre.nowrap pre,.listingblock pre.nowrap,.listingblock pre.nowrap pre{white-space:pre;word-wrap:normal}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #dddddf}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Are modules fast?</h1>
<div class="details">
<span id="author" class="author">Rene Rivera</span><br>
<span id="email" class="email"><a href="mailto:grafikrobot@gmail.com">grafikrobot@gmail.com</a></span><br>
<span id="revnumber"> D1441R1,</span>
<span id="revdate">2019-01-29</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_abstract">1. Abstract</a></li>
<li><a href="#_changes">2. Changes</a>
<ul class="sectlevel2">
<li><a href="#_r1">2.1. R1</a></li>
<li><a href="#_r0_initial">2.2. R0 (Initial)</a></li>
</ul>
</li>
<li><a href="#_introduction">3. Introduction</a></li>
<li><a href="#_parallel_build">4. Parallel Build</a>
<ul class="sectlevel2">
<li><a href="#_method">4.1. Method</a>
<ul class="sectlevel3">
<li><a href="#_modular_source">4.1.1. Modular Source</a></li>
<li><a href="#_non_modular_source">4.1.2. Non-modular Source</a></li>
</ul>
</li>
<li><a href="#_limitations">4.2. Limitations</a></li>
<li><a href="#_results">4.3. Results</a></li>
</ul>
</li>
<li><a href="#_conclusion">5. Conclusion</a></li>
<li><a href="#_acknowledgements">6. Acknowledgements</a></li>
<li><a href="#_references">7. References</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<style>
.admonitionblock .icon .title {
    font-size: 2.5em;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, .5);
}
.caution .icon .title {
    color: rgba(192, 51, 0, 1);
}
.important .icon .title {
    color: rgba(192, 0, 0, 1);
}
.note .icon .title {
    color: rgba(26, 64, 128, 1);
}
.tip .icon .title {
    color: rgba(255, 192, 0, 1);
}
.warning .icon .title {
    color: rgba(192, 102, 0, 1);
}
.hdlist p {
    margin-bottom: 0.25rem;
}
td.hdlist1, td.hdlist2 {
    padding-bottom: 0;
}
p,blockquote,dt,td.content,span.alt {
    font-size: 1.1rem
}
h1, h2, h3, h4, h5, h6 {
    font-weight: bold;
}
h1 {
    font-size: 2.25em;
}
h2 {
    font-size: 1.5em;
}
h3,#toctitle,.sidebarblock>.content>.title {
    font-size: 1.3em;
}
h4, h5 {
    font-size: 1.2em;
}
h6 {
    font-size: 1.1em;
}
</style>
<script src="echarts.min.js"></script>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Document number
</td>
<td class="hdlist2">
<p>ISO/IEC/JTC1/SC22/WG21/D1441R1</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Date
</td>
<td class="hdlist2">
<p>2019-01-29</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Reply-to
</td>
<td class="hdlist2">
<p>Rene Rivera, <a href="mailto:grafikrobot@gmail.com">grafikrobot@gmail.com</a></p>
</td>
</tr>
<tr>
<td class="hdlist1">
Audience
</td>
<td class="hdlist2">
<p>WG21</p>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_abstract"><a class="anchor" href="#_abstract"></a>1. Abstract</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Measurements of the performance of building C++ modules and relevant comparisons.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_changes"><a class="anchor" href="#_changes"></a>2. Changes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_r1"><a class="anchor" href="#_r1"></a>2.1. R1</h3>
<div class="paragraph">
<p>Fix bug in test generation and DAG calculation that resulted in non-uniform
growth in the modular test times. Fix grammatical errors. Ran tests on a high
CPU machine from the GCC Farm Project. Additional data of parallel building
from higher thread and faster hardware, thanks to Robert Maynard for running
the tests.</p>
</div>
</div>
<div class="sect2">
<h3 id="_r0_initial"><a class="anchor" href="#_r0_initial"></a>2.2. R0 (Initial)</h3>
<div class="paragraph">
<p>Initial performance measurements for synthetic tests of gcc merged modules
implementation (rev 268043, 2019-01-17 10:58:47 -0600 (Thu, 17 Jan 2019)) .</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction"><a class="anchor" href="#_introduction"></a>3. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>One of the stated goals of the modules proposals was performance over existing
non-modular source specifically in terms of scalable builds. This paper aims to
answer the important question of whether that goal was achieved by current
modules implementations.</p>
</div>
<div class="paragraph">
<p>Building software does not happen in the solitude of the C++ compiler. It is
a careful orchestration of a collection of tools from the preprocessor,
compiler, linker, assembler, etc controlled by the build system. These have
all been optimized to deal with the current separate compilation model and
generally perform gargantuan feats. But as such it means that performance
measurement needs to take into account, to some degree, all those in a
controlled method to generate meaningful measurements.</p>
</div>
<div class="paragraph">
<p>To that end the measurements presented here are "synthetic". They are structured
such that they simulate and isolate certain components, like the build system,
to facilitate the extraction of relevance in the data. Such methods are
described below for individual measurements.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_parallel_build"><a class="anchor" href="#_parallel_build"></a>4. Parallel Build</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Although there are various aspects comprising performance scalability of key
interest is in seeing how the potential algorithmic savings of modules "caching"
compiler work at the cost of longer DAG build chains compares against the current,
almost unlimited, parallelized building of plain source compiles. This test aims
to measure the overall compile times of modular source across varied dependency
chain depth against equivalent non-modular source.</p>
</div>
<div class="sect2">
<h3 id="_method"><a class="anchor" href="#_method"></a>4.1. Method</h3>
<div class="paragraph">
<p>Overall we perform the basic task of compiling 150 C++ source files into
corresponding object files only. We perform the compile at different dependency
DAG chain depth counts. Each source depends, either as an <code>import</code> or
<code>#include</code>, on some number of sources (headers or modules) from all the
previous DAG levels. The overall time to compile all 150 files is taken
as the result of the measurements. An important observation is that at the
highest DAG depth the arrangement creates a completely linear dependency
chain.</p>
</div>
<div class="sect3">
<h4 id="_modular_source"><a class="anchor" href="#_modular_source"></a>4.1.1. Modular Source</h4>
<div class="paragraph">
<p>For modular source this test simulates the behavior of a build system to
compile individual modular source files in parallel executions of the
compiler to the limit of the available CPU threads. It does so in
appropriate, but simulated, dependency DAG order; compiling each DAG
level as a group. The process goes as such:</p>
</div>
<div class="paragraph">
<p>1) Generate a synthetic, and simplified, DAG to describe the build. Where
all the sources in the level can be compiled in parallel.</p>
</div>
<div class="paragraph">
<p>2) Generate all source files similar to this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">export module m148;

import m0;
import m15;
import m84;

namespace m148_ns
{
export int n = 0;
export int i1 = 1;
// ...
export int i300 = 300;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where the imports are randomly chosen from the set of all already compiled
modules (in previous DAG levels).</p>
</div>
<div class="paragraph">
<p>3) For each DAG level compile all the source files therein with a GCC invocation
similar to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">g++ -fmodules-ts -c -O0 m148.cpp</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_non_modular_source"><a class="anchor" href="#_non_modular_source"></a>4.1.2. Non-modular Source</h4>
<div class="paragraph">
<p>For no-modular source this test simulates the behavior of a build system to
compile individually all source files in parallel executions of the
compiler to the limit of the available CPU threads. As the non-modular
sources only depend on already existing header source files all source
files can be attempted to be compiled at once. The process goes as such:</p>
</div>
<div class="paragraph">
<p>1) Generate a synthetic, and simplified, DAG to describe the build with
parity to the modular build. But which is not used in the build itself.</p>
</div>
<div class="paragraph">
<p>2) Generate all source header files similar to this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">#ifndef H_GUARD_h148
#define H_GUARD_h148
#include "h77.hpp"
#include "h78.hpp"
#include "h92.hpp"


namespace h148_ns
{
int n = 0;
int i1 = 1;
// ...
int i300 = 300;
}
#endif</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where the includes are randomly chosen from the set of all headers files in
previous DAG levels. Although not needed to limit to previous DAG levels
this is done to keep parity with the modular source in terms of statistical
complexity of the included source size.</p>
</div>
<div class="paragraph">
<p>3) Generate all source files similar to this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">#include "h148.hpp"</code></pre>
</div>
</div>
<div class="paragraph">
<p>4) Compile all source files as one group with a GCC invocation similar to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">g++ -c -O0 h148.cpp</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_limitations"><a class="anchor" href="#_limitations"></a>4.2. Limitations</h3>
<div class="paragraph">
<p>This test has some real-life limitations borne out of the software and hardware
used for testing. Some of these limitations were discovered through
experimentation, for example with internal compiler errors.</p>
</div>
<div class="paragraph">
<p>Being an experimental compiler the support for compiling modules is fragile and
placed severe limits on what the modular sources could contain. Most current
C++ constructs fail to compile reliably, for example templates, and cause ICEs.
This is why the generated sources only contain <code>int</code> variable definitions.</p>
</div>
<div class="paragraph">
<p>Along that same line the current modular compiler also seems to have stability
limits on how many imports can be done. This is why only a maximum of three (3)
<code>import</code> statements are included in the source. As the compiler errors with
four (4) or more <code>import</code> statements.</p>
</div>
<div class="paragraph">
<p>Not to be outdone, compiling the header test also has one limitation. The
compiler has a hard limit of number of include header depth of 150. Which is
why the tests only cover up to 150 files and consequently a matching DAG depth.</p>
</div>
<div class="paragraph">
<p>This is a simulation with "perfect" build knowledge as all dependency and source
information is known before building starts. Hence it is only a very rough
approximation of reality where build system have to deal with dependency
discovery while building and in the face of generated source files.</p>
</div>
<div style="page-break-before: always"></div>
</div>
<div class="sect2">
<h3 id="_results"><a class="anchor" href="#_results"></a>4.3. Results</h3>
<script type="text/javascript">
function parallel_build_value_fmt(v) {
    return Number.parseFloat(v).toFixed(1).toString();
}
function create_parallel_build_chart(target, title, data) {
    var chart = echarts.init(document.getElementById(target));
    chart.setOption({
        title: title,
        legend: { data:['Non-Modular', 'Modular'] },
        tooltip: {
            trigger: 'axis',
            axisPointer: { type: 'shadow' }
        },
        xAxis: [ { name: 'DAG Depth', type: 'category', nameLocation: 'center', nameGap: 30 } ],
        yAxis: [ { name: 'Wall Clock Seconds', type: 'value', nameLocation: 'center', nameGap: 45 } ],
        series: [
            {
                name: 'Non-Modular',
                type: 'bar',
                // type: 'pictorialBar', symbol: 'rect',
                label: { normal: {
                    show: true, position: 'top', rotate: 90,
                    align: 'left', verticalAlign: 'middle',
                    formatter: function (params) { return parallel_build_value_fmt(params.value[1]); }
                } },
                encode: { x: 'dag_depth', y: 'headers' },
            },
            {
                name: 'Modular',
                type: 'bar',
                // type: 'pictorialBar', symbol: 'roundRect', symbolRepeat: true, symbolSize: ['100%', 5], barGap: '0%',
                label: { normal: {
                    show: true, position: 'top', rotate: 90,
                    align: 'left', verticalAlign: 'middle',
                    formatter: function (params) { return parallel_build_value_fmt(params.value[2]); }
                } },
                encode: { x: 'dag_depth', y: 'modules' },
                formatter: parallel_build_value_fmt,
            },
        ],
        dataset: { source: data }
    });
}
</script>
<div id="parallel_build" style="height: 400px;"></div>
<script type="text/javascript">
var parallel_build_chart = create_parallel_build_chart(
'parallel_build',
{
    text: 'Jobs: 8',
    subtext: 'Coqui: Intel Mobile Core i7 "Haswell/Crystalwell" (I7-4870HQ) @ 2.5GHz (4 physical cores / 8 threads)'
},
[
  [
    "dag_depth",
    "headers",
    "modules"
  ],
  [
    1,
    2.047581071034074,
    1.643755764234811
  ],
  [
    8,
    3.5855454998090863,
    2.5827421550638974
  ],
  [
    15,
    7.558886209037155,
    3.292945663910359
  ],
  [
    22,
    9.49120874889195,
    2.782644603867084
  ],
  [
    29,
    9.932089673820883,
    3.420704036951065
  ],
  [
    36,
    11.64911951078102,
    4.356781066861004
  ],
  [
    43,
    11.848963083699346,
    5.059730122797191
  ],
  [
    50,
    13.914212169125676,
    5.892489905934781
  ],
  [
    57,
    12.536496944725513,
    6.663867154158652
  ],
  [
    64,
    12.776519584003836,
    7.49901037523523
  ],
  [
    71,
    13.750167754944414,
    8.459747282322496
  ],
  [
    78,
    13.573011949658394,
    9.262814636807889
  ],
  [
    85,
    13.784118541050702,
    10.11007883027196
  ],
  [
    92,
    13.214942447375506,
    10.866925442125648
  ],
  [
    99,
    13.69074606988579,
    11.74870520690456
  ],
  [
    106,
    13.570590225979686,
    12.587871377822012
  ],
  [
    113,
    13.901540867984295,
    13.598692934028804
  ],
  [
    120,
    14.195203503128141,
    14.473035192582756
  ],
  [
    127,
    14.946363707073033,
    15.371207612100989
  ],
  [
    134,
    14.427208126988262,
    16.066386860329658
  ],
  [
    141,
    14.680705606006086,
    16.976672722026706
  ],
  [
    148,
    14.733091264031827,
    17.813530419021845
  ]
]
);
</script>
<div class="paragraph">
<p>As we can see there is an initial performance advantage to modular source
over non-modular source. This advantage diminishes as the dependency depth
grows and hence the number of parallel modular source compiles decreases.
The performance of the non-modular initially climbs quickly as the amount
of source increases from transitively including more of the headers.
That increase eventually flattens when each file is including approximately
the entire source. This happens roughly at the 1/3 point and matches
having each header include 3 other headers (i.e. at the 150/3 demarcation).
Whereas the modular continually increases in time inversely proportional
to the number of parallel builds that can execute per DAG level. Eventually
reaching linear execution at the highest DAG level of 150 for this test.</p>
</div>
<div class="paragraph">
<p>This indicates that as long as we can execute parallel modular compiles at
the same rate as non-modular compiles it appears that modular compiles have
a varied but perceptible performance advantage.</p>
</div>
<div class="paragraph">
<p>This also indicates that the larger the number of real parallel builds
possible the less advantage modular compiles have over non-modular compiles.</p>
</div>
<div class="paragraph">
<p>Below we are building with an approximately equal per core speed machine. But
this machine is capable of executing up 128 threads with its 32 physical cores.</p>
</div>
<div id="parallel_build_gcc135_16" style="height: 400px;"></div>
<script type="text/javascript">
var parallel_build_chart = create_parallel_build_chart(
'parallel_build_gcc135_16',
{
    text: 'Jobs: 16',
    subtext: 'GCC135: POWER9, altivec supported 2.2 (pvr 004e 1202) @ 2.166GHz (2 CPU, 32 cores, 128 threads)'
},
[
  [
    "dag_depth",
    "headers",
    "modules"
  ],
  [
    1,
    0.4275169372558594,
    0.5185210704803467
  ],
  [
    8,
    2.125641107559204,
    0.9288849830627441
  ],
  [
    15,
    3.933159828186035,
    1.7470829486846924
  ],
  [
    22,
    4.838046073913574,
    2.7670199871063232
  ],
  [
    29,
    5.2369160652160645,
    3.3806538581848145
  ],
  [
    36,
    5.941248893737793,
    4.306736946105957
  ],
  [
    43,
    6.141770839691162,
    5.0203351974487305
  ],
  [
    50,
    6.846549987792969,
    5.835064888000488
  ],
  [
    57,
    6.94464898109436,
    6.684705972671509
  ],
  [
    64,
    6.84309196472168,
    7.502121925354004
  ],
  [
    71,
    6.8433310985565186,
    8.318428039550781
  ],
  [
    78,
    7.445662975311279,
    9.259238958358765
  ],
  [
    85,
    7.143863916397095,
    10.104191780090332
  ],
  [
    92,
    7.1433329582214355,
    10.77516222000122
  ],
  [
    99,
    8.04826307296753,
    11.696542024612427
  ],
  [
    106,
    7.754353046417236,
    12.555422067642212
  ],
  [
    113,
    7.952244997024536,
    13.21995496749878
  ],
  [
    120,
    8.15510606765747,
    14.080713987350464
  ],
  [
    127,
    7.6477179527282715,
    15.019285202026367
  ],
  [
    134,
    8.14616084098816,
    15.692795991897583
  ],
  [
    141,
    8.65572714805603,
    16.630268096923828
  ],
  [
    148,
    8.54915714263916,
    17.358685970306396
  ]
]
);
</script>
<div id="parallel_build_gcc135_32" style="height: 400px;"></div>
<script type="text/javascript">
var parallel_build_chart = create_parallel_build_chart(
'parallel_build_gcc135_32',
{
    text: 'Jobs: 32',
    subtext: 'GCC135: POWER9, altivec supported 2.2 (pvr 004e 1202) @ 2.166GHz (2 CPU, 32 cores, 128 threads)'
},
[
  [
    "dag_depth",
    "headers",
    "modules"
  ],
  [
    1,
    0.3413398265838623,
    0.3360769748687744
  ],
  [
    8,
    1.4411289691925049,
    1.058077096939087
  ],
  [
    15,
    2.8495659828186035,
    1.9906020164489746
  ],
  [
    22,
    3.251826047897339,
    2.930569887161255
  ],
  [
    29,
    3.7556800842285156,
    3.8671460151672363
  ],
  [
    36,
    3.8590781688690186,
    4.806483030319214
  ],
  [
    43,
    4.362910985946655,
    5.742933988571167
  ],
  [
    50,
    4.564779043197632,
    6.6864519119262695
  ],
  [
    57,
    4.883011102676392,
    7.632982969284058
  ],
  [
    64,
    4.970871925354004,
    8.568984031677246
  ],
  [
    71,
    4.976773023605347,
    9.508754014968872
  ],
  [
    78,
    4.968045949935913,
    10.582046031951904
  ],
  [
    85,
    5.479862928390503,
    11.514716148376465
  ],
  [
    92,
    5.169389963150024,
    12.327831983566284
  ],
  [
    99,
    5.370140075683594,
    13.452305793762207
  ],
  [
    106,
    5.571798086166382,
    14.37592101097107
  ],
  [
    113,
    5.5737528800964355,
    15.202737092971802
  ],
  [
    120,
    5.673955917358398,
    16.09536600112915
  ],
  [
    127,
    5.8758320808410645,
    17.200308799743652
  ],
  [
    134,
    5.772274971008301,
    18.085076808929443
  ],
  [
    141,
    6.074195861816406,
    18.940150022506714
  ],
  [
    148,
    5.969595193862915,
    19.852410078048706
  ]
]
);
</script>
<div id="parallel_build_gcc135_48" style="height: 400px;"></div>
<script type="text/javascript">
var parallel_build_chart = create_parallel_build_chart(
'parallel_build_gcc135_48',
{
    text: 'Jobs: 48',
    subtext: 'GCC135: POWER9, altivec supported 2.2 (pvr 004e 1202) @ 2.166GHz (2 CPU, 32 cores, 128 threads)'
},
[
  [
    "dag_depth",
    "headers",
    "modules"
  ],
  [
    1,
    0.2602369785308838,
    0.28079986572265625
  ],
  [
    8,
    1.2631571292877197,
    1.215296983718872
  ],
  [
    15,
    2.2748680114746094,
    2.276540994644165
  ],
  [
    22,
    2.8795759677886963,
    3.3525309562683105
  ],
  [
    29,
    3.3024179935455322,
    4.7010791301727295
  ],
  [
    36,
    3.500859022140503,
    5.459131956100464
  ],
  [
    43,
    3.491713047027588,
    6.633459091186523
  ],
  [
    50,
    3.5966501235961914,
    7.607445955276489
  ],
  [
    57,
    3.992821216583252,
    8.7900390625
  ],
  [
    64,
    3.8142788410186768,
    9.732953071594238
  ],
  [
    71,
    4.219695091247559,
    11.108325958251953
  ],
  [
    78,
    4.423386812210083,
    12.032409906387329
  ],
  [
    85,
    4.396888971328735,
    13.070539951324463
  ],
  [
    92,
    4.2105958461761475,
    14.075057029724121
  ],
  [
    99,
    4.214250802993774,
    15.222570896148682
  ],
  [
    106,
    4.710831880569458,
    16.27533507347107
  ],
  [
    113,
    4.595962047576904,
    17.37357997894287
  ],
  [
    120,
    4.605752229690552,
    18.200148105621338
  ],
  [
    127,
    4.9992711544036865,
    19.52800488471985
  ],
  [
    134,
    4.597424030303955,
    20.348912000656128
  ],
  [
    141,
    5.017436981201172,
    21.625916004180908
  ],
  [
    148,
    5.428776025772095,
    22.53894305229187
  ]
]
);
</script>
<div id="parallel_build_gcc135_64" style="height: 400px;"></div>
<script type="text/javascript">
var parallel_build_chart = create_parallel_build_chart(
'parallel_build_gcc135_64',
{
    text: 'Jobs: 64',
    subtext: 'GCC135: POWER9, altivec supported 2.2 (pvr 004e 1202) @ 2.166GHz (2 CPU, 32 cores, 128 threads)'
},
[
  [
    "dag_depth",
    "headers",
    "modules"
  ],
  [
    1,
    0.2914619445800781,
    0.2724740505218506
  ],
  [
    8,
    1.0966391563415527,
    1.3751909732818604
  ],
  [
    15,
    2.0118191242218018,
    2.5923309326171875
  ],
  [
    22,
    2.516972780227661,
    3.7911088466644287
  ],
  [
    29,
    3.1226940155029297,
    5.020266056060791
  ],
  [
    36,
    3.3422088623046875,
    6.231278896331787
  ],
  [
    43,
    3.0378780364990234,
    7.527320146560669
  ],
  [
    50,
    3.5397300720214844,
    8.650467157363892
  ],
  [
    57,
    3.314357042312622,
    10.050405025482178
  ],
  [
    64,
    3.3373820781707764,
    11.129668951034546
  ],
  [
    71,
    3.6325809955596924,
    12.268187046051025
  ],
  [
    78,
    3.9437060356140137,
    13.695375919342041
  ],
  [
    85,
    3.72418212890625,
    14.942226886749268
  ],
  [
    92,
    3.9509711265563965,
    15.943632125854492
  ],
  [
    99,
    3.9399330615997314,
    17.271871089935303
  ],
  [
    106,
    4.140789985656738,
    18.528451204299927
  ],
  [
    113,
    4.043951034545898,
    19.80996298789978
  ],
  [
    120,
    4.155106067657471,
    20.778573989868164
  ],
  [
    127,
    4.357200860977173,
    22.189985036849976
  ],
  [
    134,
    4.35994291305542,
    23.318957090377808
  ],
  [
    141,
    4.331891059875488,
    24.476943016052246
  ],
  [
    148,
    4.453520059585571,
    25.561216115951538
  ]
]
);
</script>
<div id="parallel_build_gcc135_80" style="height: 400px;"></div>
<script type="text/javascript">
var parallel_build_chart = create_parallel_build_chart(
'parallel_build_gcc135_80',
{
    text: 'Jobs: 80',
    subtext: 'GCC135: POWER9, altivec supported 2.2 (pvr 004e 1202) @ 2.166GHz (2 CPU, 32 cores, 128 threads)'
},
[
  [
    "dag_depth",
    "headers",
    "modules"
  ],
  [
    1,
    0.21349000930786133,
    0.31618595123291016
  ],
  [
    8,
    0.9212608337402344,
    1.5633130073547363
  ],
  [
    15,
    1.7282719612121582,
    2.9307758808135986
  ],
  [
    22,
    2.1533050537109375,
    4.291851043701172
  ],
  [
    29,
    2.3506481647491455,
    5.645557880401611
  ],
  [
    36,
    2.5434160232543945,
    7.031563997268677
  ],
  [
    43,
    2.5516018867492676,
    8.406389951705933
  ],
  [
    50,
    2.6471691131591797,
    9.751949071884155
  ],
  [
    57,
    2.870911121368408,
    11.337335109710693
  ],
  [
    64,
    2.974073886871338,
    12.529186964035034
  ],
  [
    71,
    3.048424005508423,
    13.996721982955933
  ],
  [
    78,
    2.8507778644561768,
    15.497245073318481
  ],
  [
    85,
    3.0657849311828613,
    16.983114004135132
  ],
  [
    92,
    3.258636951446533,
    18.070364952087402
  ],
  [
    99,
    3.171160936355591,
    19.677009105682373
  ],
  [
    106,
    3.0632309913635254,
    21.020369052886963
  ],
  [
    113,
    3.3747620582580566,
    22.159507036209106
  ],
  [
    120,
    3.4775309562683105,
    23.695492029190063
  ],
  [
    127,
    3.3700308799743652,
    25.080610990524292
  ],
  [
    134,
    3.4806790351867676,
    26.25156283378601
  ],
  [
    141,
    3.5681381225585938,
    27.433927059173584
  ],
  [
    148,
    3.666393995285034,
    29.00312900543213
  ]
]
);
</script>
<div id="parallel_build_gcc135_96" style="height: 400px;"></div>
<script type="text/javascript">
var parallel_build_chart = create_parallel_build_chart(
'parallel_build_gcc135_96',
{
    text: 'Jobs: 96',
    subtext: 'GCC135: POWER9, altivec supported 2.2 (pvr 004e 1202) @ 2.166GHz (2 CPU, 32 cores, 128 threads)'
},
[
  [
    "dag_depth",
    "headers",
    "modules"
  ],
  [
    1,
    0.23974204063415527,
    0.34315991401672363
  ],
  [
    8,
    0.9601490497589111,
    1.7621288299560547
  ],
  [
    15,
    1.5744178295135498,
    3.3012309074401855
  ],
  [
    22,
    1.9723598957061768,
    4.860388994216919
  ],
  [
    29,
    2.2847321033477783,
    6.378109931945801
  ],
  [
    36,
    2.3712217807769775,
    7.867828130722046
  ],
  [
    43,
    2.69165301322937,
    9.436952829360962
  ],
  [
    50,
    2.68546199798584,
    11.102751970291138
  ],
  [
    57,
    2.580353021621704,
    12.625380992889404
  ],
  [
    64,
    2.5873920917510986,
    14.107476949691772
  ],
  [
    71,
    2.69301700592041,
    15.636852025985718
  ],
  [
    78,
    2.796753168106079,
    17.54341983795166
  ],
  [
    85,
    2.697300910949707,
    19.066941022872925
  ],
  [
    92,
    3.0980491638183594,
    20.363383054733276
  ],
  [
    99,
    3.104820966720581,
    22.17218589782715
  ],
  [
    106,
    3.203166961669922,
    23.753036975860596
  ],
  [
    113,
    3.1926679611206055,
    24.93696689605713
  ],
  [
    120,
    3.309997081756592,
    26.583822011947632
  ],
  [
    127,
    3.4048449993133545,
    28.351689100265503
  ],
  [
    134,
    3.284719944000244,
    29.700826168060303
  ],
  [
    141,
    3.206835985183716,
    31.247167110443115
  ],
  [
    148,
    3.520148992538452,
    32.72217392921448
  ]
]
);
</script>
<div id="parallel_build_gcc135_128" style="height: 400px;"></div>
<script type="text/javascript">
var parallel_build_chart = create_parallel_build_chart(
'parallel_build_gcc135_128',
{
    text: 'Jobs: 128',
    subtext: 'GCC135: POWER9, altivec supported 2.2 (pvr 004e 1202) @ 2.166GHz (2 CPU, 32 cores, 128 threads)'
},
[
  [
    "dag_depth",
    "headers",
    "modules"
  ],
  [
    1,
    0.2856931686401367,
    0.3975369930267334
  ],
  [
    8,
    0.9141650199890137,
    2.1820430755615234
  ],
  [
    15,
    1.5307579040527344,
    4.166504144668579
  ],
  [
    22,
    1.9396891593933105,
    6.079208135604858
  ],
  [
    29,
    1.9407129287719727,
    8.063982009887695
  ],
  [
    36,
    2.056518077850342,
    9.955644845962524
  ],
  [
    43,
    2.248806953430176,
    11.944358825683594
  ],
  [
    50,
    2.459678888320923,
    13.906062126159668
  ],
  [
    57,
    2.5518689155578613,
    15.971055030822754
  ],
  [
    64,
    2.5451409816741943,
    17.857609033584595
  ],
  [
    71,
    2.6535959243774414,
    19.73924684524536
  ],
  [
    78,
    2.767738103866577,
    21.963953971862793
  ],
  [
    85,
    2.567255973815918,
    24.02560806274414
  ],
  [
    92,
    2.778745174407959,
    25.571998119354248
  ],
  [
    99,
    2.671147108078003,
    27.848523139953613
  ],
  [
    106,
    2.761867046356201,
    30.083997011184692
  ],
  [
    113,
    2.8824219703674316,
    31.48926591873169
  ],
  [
    120,
    3.0811710357666016,
    34.007904052734375
  ],
  [
    127,
    2.9717559814453125,
    35.8999559879303
  ],
  [
    134,
    2.973538875579834,
    37.55758500099182
  ],
  [
    141,
    3.182023048400879,
    39.64533996582031
  ],
  [
    148,
    3.2829389572143555,
    41.67250609397888
  ]
]
);
</script>
<div class="paragraph">
<p>That shows the postulation above that as the number of parallel compiles
increases modular builds loose more of their advantage at lower and lower
DAG depths.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusion"><a class="anchor" href="#_conclusion"></a>5. Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With the limitations of the capabilities of the compiler one can only conclude
that modular builds could be advantageous at lower parallelism levels
environments. In other words, that modules currently do not scale in the same
ways as traditional compilation.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_acknowledgements"><a class="anchor" href="#_acknowledgements"></a>6. Acknowledgements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Thanks to Nathan Sidwell for the work to implement the latest merged modules
proposal in GCC. And the citizens of the Internet and more specifically the
contributors to StackOverflow for the hints that made it possible to
decipher how to get the GCC svn checkout to build in OSX.</p>
</div>
<div class="paragraph">
<p>Special thanks to Robert Maynard for taking the time and resources to build
GCC and run the test script on various machine configurations and job counts.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references"><a class="anchor" href="#_references"></a>7. References</h2>
<div class="sectionbody">
<div class="paragraph">
<p>GCC cxx-modules implementation, Nathan Sidwell
<a href="https://gcc.gnu.org/wiki/cxx-modules">https://gcc.gnu.org/wiki/cxx-modules</a></p>
</div>
<div class="paragraph">
<p>C++ Tooling Stats, Rene Rivera
<a href="https://github.com/bfgroup/cpp_tooling_stats">https://github.com/bfgroup/cpp_tooling_stats</a></p>
</div>
</div>
</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/github.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>